{% extends "base.html" %}

{% block title %}Vegetable Storage - CropCell Admin{% endblock %}

{% block content %}
<div class="card">
    <h1 class="page-title">
        <i class="fas fa-carrot"></i> Vegetable Storage Management
    </h1>
</div>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert">
                <i class="fas fa-info-circle"></i> {{ message }}
            </div>
        {% endfor %}
    {% endif %}
{% endwith %}

{% if vegetables %}
<div class="stats-grid">
    {% for name, v in vegetables|dictsort %}
    <div class="stat-card">
        <div class="stat-icon">
            <i class="fas fa-carrot"></i>
        </div>
        <div class="stat-value">{{ v.quantity }}</div>
        <div class="stat-label">{{ v.weight }} kg {{ name|capitalize }}</div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="card">
    <p style="color: #718096; text-align: center;">
        <i class="fas fa-info-circle"></i> No vegetables found.
    </p>
</div>
{% endif %}

<div class="card">
    <h3><i class="fas fa-plus"></i> Update Storage</h3>
    <form method="post" action="{{ url_for('vegetables.update_vegetables') }}">
        {% if vegetables %}
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            {% for name, v in vegetables|dictsort %}
            <div>
                <h4 style="color: #4a5568; margin-bottom: 1rem;">
                    <i class="fas fa-carrot"></i> {{ name|capitalize }}
                </h4>
                <div class="form-group">
                    <label for="quantity_{{ name }}">Quantity (pieces)</label>
                    <input type="number" id="quantity_{{ name }}" name="quantity_{{ name }}" 
                           value="{{ v.quantity }}" class="form-control" min="0">
                </div>
                <div class="form-group">
                    <label for="weight_{{ name }}">Weight (kg)</label>
                    <input type="number" id="weight_{{ name }}" name="weight_{{ name }}" 
                           value="{{ v.weight }}" class="form-control" min="0" step="0.1">
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="color: #718096;">No vegetables to update.</p>
        {% endif %}
        
        <div style="text-align: center; margin-top: 1.5rem;">
            <button type="submit" class="btn btn-success" style="width: 100%; max-width: 300px;">
                <i class="fas fa-save"></i> Update Storage
            </button>
        </div>
    </form>
</div>
{% endblock %}
